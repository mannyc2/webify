{
  "version": "6",
  "dialect": "sqlite",
  "id": "745f6367-9b0d-4e59-9b86-ecc2169eb275",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "change_events": {
      "name": "change_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "store_domain": {
          "name": "store_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "occurred_at": {
          "name": "occurred_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "change_type": {
          "name": "change_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "magnitude": {
          "name": "magnitude",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'medium'"
        },
        "product_title": {
          "name": "product_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "variant_title": {
          "name": "variant_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "old_value": {
          "name": "old_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "new_value": {
          "name": "new_value",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "price_change": {
          "name": "price_change",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_read": {
          "name": "is_read",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "product_shopify_id": {
          "name": "product_shopify_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_events_store": {
          "name": "idx_events_store",
          "columns": [
            "store_domain"
          ],
          "isUnique": false
        },
        "idx_events_occurred": {
          "name": "idx_events_occurred",
          "columns": [
            "occurred_at"
          ],
          "isUnique": false
        },
        "idx_events_type": {
          "name": "idx_events_type",
          "columns": [
            "change_type"
          ],
          "isUnique": false
        },
        "idx_events_unread": {
          "name": "idx_events_unread",
          "columns": [
            "is_read",
            "occurred_at"
          ],
          "isUnique": false
        },
        "idx_events_product": {
          "name": "idx_events_product",
          "columns": [
            "product_shopify_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "change_events_store_domain_stores_domain_fk": {
          "name": "change_events_store_domain_stores_domain_fk",
          "tableFrom": "change_events",
          "tableTo": "stores",
          "columnsFrom": [
            "store_domain"
          ],
          "columnsTo": [
            "domain"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "product_images": {
      "name": "product_images",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "product_id": {
          "name": "product_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_removed": {
          "name": "is_removed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "removed_at": {
          "name": "removed_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_images_product": {
          "name": "idx_images_product",
          "columns": [
            "product_id"
          ],
          "isUnique": false
        },
        "idx_images_product_active": {
          "name": "idx_images_product_active",
          "columns": [
            "product_id",
            "is_removed"
          ],
          "isUnique": false
        },
        "idx_images_first_seen": {
          "name": "idx_images_first_seen",
          "columns": [
            "first_seen_at"
          ],
          "isUnique": false
        },
        "idx_images_url": {
          "name": "idx_images_url",
          "columns": [
            "url"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "product_images_product_id_products_id_fk": {
          "name": "product_images_product_id_products_id_fk",
          "tableFrom": "product_images",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "products": {
      "name": "products",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "store_domain": {
          "name": "store_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "handle": {
          "name": "handle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "vendor": {
          "name": "vendor",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "product_type": {
          "name": "product_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "first_seen_at": {
          "name": "first_seen_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "is_removed": {
          "name": "is_removed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "shopify_created_at": {
          "name": "shopify_created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "shopify_published_at": {
          "name": "shopify_published_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "shopify_updated_at": {
          "name": "shopify_updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "cached_price": {
          "name": "cached_price",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'0'"
        },
        "cached_is_available": {
          "name": "cached_is_available",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "title_search_key": {
          "name": "title_search_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "''"
        }
      },
      "indexes": {
        "idx_products_store": {
          "name": "idx_products_store",
          "columns": [
            "store_domain"
          ],
          "isUnique": false
        },
        "idx_products_store_removed": {
          "name": "idx_products_store_removed",
          "columns": [
            "store_domain",
            "is_removed"
          ],
          "isUnique": false
        },
        "idx_products_store_available": {
          "name": "idx_products_store_available",
          "columns": [
            "store_domain",
            "cached_is_available"
          ],
          "isUnique": false
        },
        "idx_products_store_price": {
          "name": "idx_products_store_price",
          "columns": [
            "store_domain",
            "cached_price"
          ],
          "isUnique": false
        },
        "idx_products_store_search": {
          "name": "idx_products_store_search",
          "columns": [
            "store_domain",
            "title_search_key"
          ],
          "isUnique": false
        },
        "idx_products_store_published": {
          "name": "idx_products_store_published",
          "columns": [
            "store_domain",
            "shopify_published_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "products_store_domain_stores_domain_fk": {
          "name": "products_store_domain_stores_domain_fk",
          "tableFrom": "products",
          "tableTo": "stores",
          "columnsFrom": [
            "store_domain"
          ],
          "columnsTo": [
            "domain"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "stores": {
      "name": "stores",
      "columns": {
        "domain": {
          "name": "domain",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "added_at": {
          "name": "added_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "last_fetched_at": {
          "name": "last_fetched_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sync_status": {
          "name": "sync_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'pending'"
        },
        "last_error": {
          "name": "last_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "sync_frequency_seconds": {
          "name": "sync_frequency_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 900
        },
        "cached_product_count": {
          "name": "cached_product_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "cached_preview_image_urls": {
          "name": "cached_preview_image_urls",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'[]'"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_stores_sync_status": {
          "name": "idx_stores_sync_status",
          "columns": [
            "sync_status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "variant_snapshots": {
      "name": "variant_snapshots",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "variant_id": {
          "name": "variant_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "captured_at": {
          "name": "captured_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "price": {
          "name": "price",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "compare_at_price": {
          "name": "compare_at_price",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "available": {
          "name": "available",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        }
      },
      "indexes": {
        "idx_snapshots_variant": {
          "name": "idx_snapshots_variant",
          "columns": [
            "variant_id"
          ],
          "isUnique": false
        },
        "idx_snapshots_captured": {
          "name": "idx_snapshots_captured",
          "columns": [
            "captured_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "variant_snapshots_variant_id_variants_id_fk": {
          "name": "variant_snapshots_variant_id_variants_id_fk",
          "tableFrom": "variant_snapshots",
          "tableTo": "variants",
          "columnsFrom": [
            "variant_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "variants": {
      "name": "variants",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "product_id": {
          "name": "product_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sku": {
          "name": "sku",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "price": {
          "name": "price",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'0'"
        },
        "compare_at_price": {
          "name": "compare_at_price",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "available": {
          "name": "available",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "position": {
          "name": "position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        }
      },
      "indexes": {
        "idx_variants_product": {
          "name": "idx_variants_product",
          "columns": [
            "product_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "variants_product_id_products_id_fk": {
          "name": "variants_product_id_products_id_fk",
          "tableFrom": "variants",
          "tableTo": "products",
          "columnsFrom": [
            "product_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}